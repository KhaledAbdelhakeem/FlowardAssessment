{"version":3,"file":"demo.js","names":["checks","DirCheck","DoctorCheck","constructor","path","autofix","diagnose","fs","exists","nok","stats","lstat","isDirectory","ok","fix","push","FileCheck","log","info","yesno","fixIt","exec","FixSkippedError"],"sources":["../../lib/demo.js"],"sourcesContent":["// demo rule to test the gui\n\nimport {ok, nok} from './utils';\nimport {fs} from '@appium/support';\nimport {exec} from 'teen_process';\nimport {DoctorCheck, FixSkippedError} from './doctor';\nimport log from './logger';\nimport {fixIt} from './prompt';\n\nlet checks = [];\n\nclass DirCheck extends DoctorCheck {\n  constructor(path) {\n    super({autofix: false});\n    this.path = path;\n  }\n\n  async diagnose() {\n    if (!(await fs.exists(this.path))) {\n      return nok(`Could NOT find directory at '${this.path}'!`);\n    }\n    let stats = await fs.lstat(this.path);\n    return stats.isDirectory()\n      ? ok(`Found directory at: ${this.path}`)\n      : nok(`'${this.path}' is NOT a directory!`);\n  }\n  // eslint-disable-next-line require-await\n  async fix() {\n    return `Manually create a directory at: ${this.path}`;\n  }\n}\n\nchecks.push(new DirCheck('/tmp/appium-doctor'));\nchecks.push(new DirCheck('/tmp/appium-doctor/demo'));\n\nclass FileCheck extends DoctorCheck {\n  constructor(path) {\n    super({autofix: true});\n    this.path = path;\n  }\n\n  async diagnose() {\n    return (await fs.exists(this.path))\n      ? ok(`Found file at: ${this.path}`)\n      : nok(`Could NOT find file at '${this.path}'!`);\n  }\n\n  async fix() {\n    log.info(`The following command need be executed: touch '${this.path}'`);\n    let yesno = await fixIt();\n    if (yesno === 'yes') {\n      await exec('touch', [this.path]);\n    } else {\n      log.info(`Skipping you will need to touch '${this.path}' manually.`);\n      throw new FixSkippedError('bbb');\n    }\n  }\n}\n\nchecks.push(new FileCheck('/tmp/appium-doctor/demo/apple.fruit'));\nchecks.push(new FileCheck('/tmp/appium-doctor/demo/pear.fruit'));\nchecks.push(new FileCheck('/tmp/appium-doctor/demo/orange.fruit'));\n\nexport {DirCheck, FileCheck};\nexport default checks;\n"],"mappings":";;;;;;;;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,IAAIA,MAAM,GAAG,EAAb;;AAEA,MAAMC,QAAN,SAAuBC,mBAAvB,CAAmC;EACjCC,WAAW,CAACC,IAAD,EAAO;IAChB,MAAM;MAACC,OAAO,EAAE;IAAV,CAAN;IACA,KAAKD,IAAL,GAAYA,IAAZ;EACD;;EAEa,MAARE,QAAQ,GAAG;IACf,IAAI,EAAE,MAAMC,WAAA,CAAGC,MAAH,CAAU,KAAKJ,IAAf,CAAR,CAAJ,EAAmC;MACjC,OAAO,IAAAK,UAAA,EAAK,gCAA+B,KAAKL,IAAK,IAA9C,CAAP;IACD;;IACD,IAAIM,KAAK,GAAG,MAAMH,WAAA,CAAGI,KAAH,CAAS,KAAKP,IAAd,CAAlB;IACA,OAAOM,KAAK,CAACE,WAAN,KACH,IAAAC,SAAA,EAAI,uBAAsB,KAAKT,IAAK,EAApC,CADG,GAEH,IAAAK,UAAA,EAAK,IAAG,KAAKL,IAAK,uBAAlB,CAFJ;EAGD;;EAEQ,MAAHU,GAAG,GAAG;IACV,OAAQ,mCAAkC,KAAKV,IAAK,EAApD;EACD;;AAlBgC;;;AAqBnCJ,MAAM,CAACe,IAAP,CAAY,IAAId,QAAJ,CAAa,oBAAb,CAAZ;AACAD,MAAM,CAACe,IAAP,CAAY,IAAId,QAAJ,CAAa,yBAAb,CAAZ;;AAEA,MAAMe,SAAN,SAAwBd,mBAAxB,CAAoC;EAClCC,WAAW,CAACC,IAAD,EAAO;IAChB,MAAM;MAACC,OAAO,EAAE;IAAV,CAAN;IACA,KAAKD,IAAL,GAAYA,IAAZ;EACD;;EAEa,MAARE,QAAQ,GAAG;IACf,OAAO,CAAC,MAAMC,WAAA,CAAGC,MAAH,CAAU,KAAKJ,IAAf,CAAP,IACH,IAAAS,SAAA,EAAI,kBAAiB,KAAKT,IAAK,EAA/B,CADG,GAEH,IAAAK,UAAA,EAAK,2BAA0B,KAAKL,IAAK,IAAzC,CAFJ;EAGD;;EAEQ,MAAHU,GAAG,GAAG;IACVG,eAAA,CAAIC,IAAJ,CAAU,kDAAiD,KAAKd,IAAK,GAArE;;IACA,IAAIe,KAAK,GAAG,MAAM,IAAAC,aAAA,GAAlB;;IACA,IAAID,KAAK,KAAK,KAAd,EAAqB;MACnB,MAAM,IAAAE,kBAAA,EAAK,OAAL,EAAc,CAAC,KAAKjB,IAAN,CAAd,CAAN;IACD,CAFD,MAEO;MACLa,eAAA,CAAIC,IAAJ,CAAU,oCAAmC,KAAKd,IAAK,aAAvD;;MACA,MAAM,IAAIkB,uBAAJ,CAAoB,KAApB,CAAN;IACD;EACF;;AArBiC;;;AAwBpCtB,MAAM,CAACe,IAAP,CAAY,IAAIC,SAAJ,CAAc,qCAAd,CAAZ;AACAhB,MAAM,CAACe,IAAP,CAAY,IAAIC,SAAJ,CAAc,oCAAd,CAAZ;AACAhB,MAAM,CAACe,IAAP,CAAY,IAAIC,SAAJ,CAAc,sCAAd,CAAZ;eAGehB,M"}