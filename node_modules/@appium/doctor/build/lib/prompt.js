"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.clear = clear;
exports.configure = configure;
exports.fixIt = fixIt;

require("source-map-support/register");

var _utils = require("./utils");

let persistentResponse;
const fixItQuestion = {
  type: 'list',
  name: 'confirmation',
  message: 'Fix it:',
  choices: ['yes', 'no', 'always', 'never'],

  filter(val) {
    return val.toLowerCase();
  }

};

function configure(opts) {
  if (opts.yes) {
    persistentResponse = 'yes';
  }

  if (opts.no) {
    persistentResponse = 'no';
  }
}

function clear() {
  persistentResponse = undefined;
}

async function fixIt() {
  if (persistentResponse) {
    return persistentResponse;
  }

  let resp = await _utils.inquirer.prompt(fixItQuestion);
  persistentResponse = resp.confirmation === 'always' ? 'yes' : persistentResponse;
  persistentResponse = resp.confirmation === 'never' ? 'no' : persistentResponse;
  return persistentResponse || resp.confirmation;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwZXJzaXN0ZW50UmVzcG9uc2UiLCJmaXhJdFF1ZXN0aW9uIiwidHlwZSIsIm5hbWUiLCJtZXNzYWdlIiwiY2hvaWNlcyIsImZpbHRlciIsInZhbCIsInRvTG93ZXJDYXNlIiwiY29uZmlndXJlIiwib3B0cyIsInllcyIsIm5vIiwiY2xlYXIiLCJ1bmRlZmluZWQiLCJmaXhJdCIsInJlc3AiLCJpbnF1aXJlciIsInByb21wdCIsImNvbmZpcm1hdGlvbiJdLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9wcm9tcHQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtpbnF1aXJlcn0gZnJvbSAnLi91dGlscyc7XG5cbmxldCBwZXJzaXN0ZW50UmVzcG9uc2U7XG5cbmNvbnN0IGZpeEl0UXVlc3Rpb24gPSB7XG4gIHR5cGU6ICdsaXN0JyxcbiAgbmFtZTogJ2NvbmZpcm1hdGlvbicsXG4gIG1lc3NhZ2U6ICdGaXggaXQ6JyxcbiAgY2hvaWNlczogWyd5ZXMnLCAnbm8nLCAnYWx3YXlzJywgJ25ldmVyJ10sXG4gIGZpbHRlcih2YWwpIHtcbiAgICByZXR1cm4gdmFsLnRvTG93ZXJDYXNlKCk7XG4gIH0sXG59O1xuXG5mdW5jdGlvbiBjb25maWd1cmUob3B0cykge1xuICBpZiAob3B0cy55ZXMpIHtcbiAgICBwZXJzaXN0ZW50UmVzcG9uc2UgPSAneWVzJztcbiAgfVxuICBpZiAob3B0cy5ubykge1xuICAgIHBlcnNpc3RlbnRSZXNwb25zZSA9ICdubyc7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2xlYXIoKSB7XG4gIHBlcnNpc3RlbnRSZXNwb25zZSA9IHVuZGVmaW5lZDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZml4SXQoKSB7XG4gIGlmIChwZXJzaXN0ZW50UmVzcG9uc2UpIHtcbiAgICByZXR1cm4gcGVyc2lzdGVudFJlc3BvbnNlO1xuICB9XG4gIGxldCByZXNwID0gYXdhaXQgaW5xdWlyZXIucHJvbXB0KGZpeEl0UXVlc3Rpb24pO1xuICBwZXJzaXN0ZW50UmVzcG9uc2UgPSByZXNwLmNvbmZpcm1hdGlvbiA9PT0gJ2Fsd2F5cycgPyAneWVzJyA6IHBlcnNpc3RlbnRSZXNwb25zZTtcbiAgcGVyc2lzdGVudFJlc3BvbnNlID0gcmVzcC5jb25maXJtYXRpb24gPT09ICduZXZlcicgPyAnbm8nIDogcGVyc2lzdGVudFJlc3BvbnNlO1xuICByZXR1cm4gcGVyc2lzdGVudFJlc3BvbnNlIHx8IHJlc3AuY29uZmlybWF0aW9uO1xufVxuXG5leHBvcnQge2NvbmZpZ3VyZSwgZml4SXQsIGNsZWFyfTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7QUFFQSxJQUFJQSxrQkFBSjtBQUVBLE1BQU1DLGFBQWEsR0FBRztFQUNwQkMsSUFBSSxFQUFFLE1BRGM7RUFFcEJDLElBQUksRUFBRSxjQUZjO0VBR3BCQyxPQUFPLEVBQUUsU0FIVztFQUlwQkMsT0FBTyxFQUFFLENBQUMsS0FBRCxFQUFRLElBQVIsRUFBYyxRQUFkLEVBQXdCLE9BQXhCLENBSlc7O0VBS3BCQyxNQUFNLENBQUNDLEdBQUQsRUFBTTtJQUNWLE9BQU9BLEdBQUcsQ0FBQ0MsV0FBSixFQUFQO0VBQ0Q7O0FBUG1CLENBQXRCOztBQVVBLFNBQVNDLFNBQVQsQ0FBbUJDLElBQW5CLEVBQXlCO0VBQ3ZCLElBQUlBLElBQUksQ0FBQ0MsR0FBVCxFQUFjO0lBQ1pYLGtCQUFrQixHQUFHLEtBQXJCO0VBQ0Q7O0VBQ0QsSUFBSVUsSUFBSSxDQUFDRSxFQUFULEVBQWE7SUFDWFosa0JBQWtCLEdBQUcsSUFBckI7RUFDRDtBQUNGOztBQUVELFNBQVNhLEtBQVQsR0FBaUI7RUFDZmIsa0JBQWtCLEdBQUdjLFNBQXJCO0FBQ0Q7O0FBRUQsZUFBZUMsS0FBZixHQUF1QjtFQUNyQixJQUFJZixrQkFBSixFQUF3QjtJQUN0QixPQUFPQSxrQkFBUDtFQUNEOztFQUNELElBQUlnQixJQUFJLEdBQUcsTUFBTUMsZUFBQSxDQUFTQyxNQUFULENBQWdCakIsYUFBaEIsQ0FBakI7RUFDQUQsa0JBQWtCLEdBQUdnQixJQUFJLENBQUNHLFlBQUwsS0FBc0IsUUFBdEIsR0FBaUMsS0FBakMsR0FBeUNuQixrQkFBOUQ7RUFDQUEsa0JBQWtCLEdBQUdnQixJQUFJLENBQUNHLFlBQUwsS0FBc0IsT0FBdEIsR0FBZ0MsSUFBaEMsR0FBdUNuQixrQkFBNUQ7RUFDQSxPQUFPQSxrQkFBa0IsSUFBSWdCLElBQUksQ0FBQ0csWUFBbEM7QUFDRCJ9