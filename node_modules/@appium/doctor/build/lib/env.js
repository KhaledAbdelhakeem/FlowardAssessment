"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

require("source-map-support/register");

var _support = require("@appium/support");

var _doctor = require("./doctor");

var _utils = require("./utils");

require("@colors/colors");

class EnvVarAndPathCheck extends _doctor.DoctorCheck {
  constructor(varName) {
    super();
    this.varName = varName;
  }

  async diagnose() {
    let varValue = process.env[this.varName];

    if (typeof varValue === 'undefined') {
      return (0, _utils.nok)(`${this.varName} environment variable is NOT set!`);
    }

    return (await _support.fs.exists(varValue)) ? (0, _utils.ok)(`${this.varName} is set to: ${varValue}`) : (0, _utils.nok)(`${this.varName} is set to '${varValue}' but this is NOT a valid path!`);
  }

  fix() {
    return `Make sure the environment variable ${this.varName.bold} is properly configured for the Appium process. ` + `Refer https://github.com/appium/java-client/blob/master/docs/environment.md for more details.`;
  }

}

var _default = EnvVarAndPathCheck;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbnZWYXJBbmRQYXRoQ2hlY2siLCJEb2N0b3JDaGVjayIsImNvbnN0cnVjdG9yIiwidmFyTmFtZSIsImRpYWdub3NlIiwidmFyVmFsdWUiLCJwcm9jZXNzIiwiZW52Iiwibm9rIiwiZnMiLCJleGlzdHMiLCJvayIsImZpeCIsImJvbGQiXSwic291cmNlcyI6WyIuLi8uLi9saWIvZW52LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7ZnN9IGZyb20gJ0BhcHBpdW0vc3VwcG9ydCc7XG5pbXBvcnQge0RvY3RvckNoZWNrfSBmcm9tICcuL2RvY3Rvcic7XG5pbXBvcnQge29rLCBub2t9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0ICdAY29sb3JzL2NvbG9ycyc7XG5cbi8vIENoZWNrIGVudiB2YXJpYWJsZXNcbmNsYXNzIEVudlZhckFuZFBhdGhDaGVjayBleHRlbmRzIERvY3RvckNoZWNrIHtcbiAgY29uc3RydWN0b3IodmFyTmFtZSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy52YXJOYW1lID0gdmFyTmFtZTtcbiAgfVxuXG4gIGFzeW5jIGRpYWdub3NlKCkge1xuICAgIGxldCB2YXJWYWx1ZSA9IHByb2Nlc3MuZW52W3RoaXMudmFyTmFtZV07XG4gICAgaWYgKHR5cGVvZiB2YXJWYWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiBub2soYCR7dGhpcy52YXJOYW1lfSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyBOT1Qgc2V0IWApO1xuICAgIH1cbiAgICByZXR1cm4gKGF3YWl0IGZzLmV4aXN0cyh2YXJWYWx1ZSkpXG4gICAgICA/IG9rKGAke3RoaXMudmFyTmFtZX0gaXMgc2V0IHRvOiAke3ZhclZhbHVlfWApXG4gICAgICA6IG5vayhgJHt0aGlzLnZhck5hbWV9IGlzIHNldCB0byAnJHt2YXJWYWx1ZX0nIGJ1dCB0aGlzIGlzIE5PVCBhIHZhbGlkIHBhdGghYCk7XG4gIH1cblxuICBmaXgoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGBNYWtlIHN1cmUgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlICR7dGhpcy52YXJOYW1lLmJvbGR9IGlzIHByb3Blcmx5IGNvbmZpZ3VyZWQgZm9yIHRoZSBBcHBpdW0gcHJvY2Vzcy4gYCArXG4gICAgICBgUmVmZXIgaHR0cHM6Ly9naXRodWIuY29tL2FwcGl1bS9qYXZhLWNsaWVudC9ibG9iL21hc3Rlci9kb2NzL2Vudmlyb25tZW50Lm1kIGZvciBtb3JlIGRldGFpbHMuYFxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRW52VmFyQW5kUGF0aENoZWNrO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFHQSxNQUFNQSxrQkFBTixTQUFpQ0MsbUJBQWpDLENBQTZDO0VBQzNDQyxXQUFXLENBQUNDLE9BQUQsRUFBVTtJQUNuQjtJQUNBLEtBQUtBLE9BQUwsR0FBZUEsT0FBZjtFQUNEOztFQUVhLE1BQVJDLFFBQVEsR0FBRztJQUNmLElBQUlDLFFBQVEsR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVksS0FBS0osT0FBakIsQ0FBZjs7SUFDQSxJQUFJLE9BQU9FLFFBQVAsS0FBb0IsV0FBeEIsRUFBcUM7TUFDbkMsT0FBTyxJQUFBRyxVQUFBLEVBQUssR0FBRSxLQUFLTCxPQUFRLG1DQUFwQixDQUFQO0lBQ0Q7O0lBQ0QsT0FBTyxDQUFDLE1BQU1NLFdBQUEsQ0FBR0MsTUFBSCxDQUFVTCxRQUFWLENBQVAsSUFDSCxJQUFBTSxTQUFBLEVBQUksR0FBRSxLQUFLUixPQUFRLGVBQWNFLFFBQVMsRUFBMUMsQ0FERyxHQUVILElBQUFHLFVBQUEsRUFBSyxHQUFFLEtBQUtMLE9BQVEsZUFBY0UsUUFBUyxpQ0FBM0MsQ0FGSjtFQUdEOztFQUVETyxHQUFHLEdBQUc7SUFDSixPQUNHLHNDQUFxQyxLQUFLVCxPQUFMLENBQWFVLElBQUssa0RBQXhELEdBQ0MsK0ZBRkg7RUFJRDs7QUFyQjBDOztlQXdCOUJiLGtCIn0=