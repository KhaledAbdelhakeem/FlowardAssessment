{"version":3,"file":"dev.js","names":["checks","BinaryIsInPathCheck","DoctorCheck","constructor","binary","diagnose","resolvedPath","resolveExecutablePath","nok","process","env","PATH","ok","fix","bold","push","system","isWindows","AndroidSdkExists","sdk","ANDROID_HOME","sdkPath","path","resolve","join","fs","exists"],"sources":["../../lib/dev.js"],"sourcesContent":["import {DoctorCheck} from './doctor';\nimport {ok, nok, resolveExecutablePath} from './utils';\nimport {fs, system} from '@appium/support';\nimport path from 'path';\nimport '@colors/colors';\n\nlet checks = [];\n\n// Check PATH binaries\nclass BinaryIsInPathCheck extends DoctorCheck {\n  constructor(binary) {\n    super();\n    this.binary = binary;\n  }\n\n  async diagnose() {\n    const resolvedPath = await resolveExecutablePath(this.binary);\n    if (!resolvedPath) {\n      return nok(`${this.binary} is MISSING in PATH: ${process.env.PATH}`);\n    }\n\n    return ok(`${this.binary} was found at ${resolvedPath}`);\n  }\n\n  fix() {\n    return `Manually install the ${this.binary.bold} binary and add it to ${'PATH'.bold}.`;\n  }\n}\n\nchecks.push(new BinaryIsInPathCheck(system.isWindows() ? 'mvn.bat' : 'mvn'));\nchecks.push(new BinaryIsInPathCheck(system.isWindows() ? 'ant.bat' : 'ant'));\nchecks.push(new BinaryIsInPathCheck(system.isWindows() ? 'adb.exe' : 'adb'));\n\n// Check Android SDKs\nclass AndroidSdkExists extends DoctorCheck {\n  constructor(sdk) {\n    super();\n    this.sdk = sdk;\n  }\n\n  async diagnose() {\n    if (typeof process.env.ANDROID_HOME === 'undefined') {\n      return nok(`${this.sdk} could not be found because ANDROID_HOME is NOT set!`);\n    }\n    let sdkPath = path.resolve(process.env.ANDROID_HOME, path.join('platforms', this.sdk));\n    return (await fs.exists(sdkPath))\n      ? ok(`${this.sdk} was found at: ${sdkPath}`)\n      : nok(`${this.sdk} could NOT be found at '${sdkPath}'!`);\n  }\n\n  fix() {\n    if (typeof process.env.ANDROID_HOME === 'undefined') {\n      return `Manually configure ${'ANDROID_HOME'.bold}.`;\n    }\n    return `Manually install the ${this.sdk.bold} sdk.`;\n  }\n}\n\nchecks.push(new AndroidSdkExists('android-16'));\nchecks.push(new AndroidSdkExists('android-19'));\n\nexport {BinaryIsInPathCheck, AndroidSdkExists};\nexport default checks;\n"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,IAAIA,MAAM,GAAG,EAAb;;AAGA,MAAMC,mBAAN,SAAkCC,mBAAlC,CAA8C;EAC5CC,WAAW,CAACC,MAAD,EAAS;IAClB;IACA,KAAKA,MAAL,GAAcA,MAAd;EACD;;EAEa,MAARC,QAAQ,GAAG;IACf,MAAMC,YAAY,GAAG,MAAM,IAAAC,4BAAA,EAAsB,KAAKH,MAA3B,CAA3B;;IACA,IAAI,CAACE,YAAL,EAAmB;MACjB,OAAO,IAAAE,UAAA,EAAK,GAAE,KAAKJ,MAAO,wBAAuBK,OAAO,CAACC,GAAR,CAAYC,IAAK,EAA3D,CAAP;IACD;;IAED,OAAO,IAAAC,SAAA,EAAI,GAAE,KAAKR,MAAO,iBAAgBE,YAAa,EAA/C,CAAP;EACD;;EAEDO,GAAG,GAAG;IACJ,OAAQ,wBAAuB,KAAKT,MAAL,CAAYU,IAAK,yBAAwB,OAAOA,IAAK,GAApF;EACD;;AAjB2C;;;AAoB9Cd,MAAM,CAACe,IAAP,CAAY,IAAId,mBAAJ,CAAwBe,eAAA,CAAOC,SAAP,KAAqB,SAArB,GAAiC,KAAzD,CAAZ;AACAjB,MAAM,CAACe,IAAP,CAAY,IAAId,mBAAJ,CAAwBe,eAAA,CAAOC,SAAP,KAAqB,SAArB,GAAiC,KAAzD,CAAZ;AACAjB,MAAM,CAACe,IAAP,CAAY,IAAId,mBAAJ,CAAwBe,eAAA,CAAOC,SAAP,KAAqB,SAArB,GAAiC,KAAzD,CAAZ;;AAGA,MAAMC,gBAAN,SAA+BhB,mBAA/B,CAA2C;EACzCC,WAAW,CAACgB,GAAD,EAAM;IACf;IACA,KAAKA,GAAL,GAAWA,GAAX;EACD;;EAEa,MAARd,QAAQ,GAAG;IACf,IAAI,OAAOI,OAAO,CAACC,GAAR,CAAYU,YAAnB,KAAoC,WAAxC,EAAqD;MACnD,OAAO,IAAAZ,UAAA,EAAK,GAAE,KAAKW,GAAI,sDAAhB,CAAP;IACD;;IACD,IAAIE,OAAO,GAAGC,aAAA,CAAKC,OAAL,CAAad,OAAO,CAACC,GAAR,CAAYU,YAAzB,EAAuCE,aAAA,CAAKE,IAAL,CAAU,WAAV,EAAuB,KAAKL,GAA5B,CAAvC,CAAd;;IACA,OAAO,CAAC,MAAMM,WAAA,CAAGC,MAAH,CAAUL,OAAV,CAAP,IACH,IAAAT,SAAA,EAAI,GAAE,KAAKO,GAAI,kBAAiBE,OAAQ,EAAxC,CADG,GAEH,IAAAb,UAAA,EAAK,GAAE,KAAKW,GAAI,2BAA0BE,OAAQ,IAAlD,CAFJ;EAGD;;EAEDR,GAAG,GAAG;IACJ,IAAI,OAAOJ,OAAO,CAACC,GAAR,CAAYU,YAAnB,KAAoC,WAAxC,EAAqD;MACnD,OAAQ,sBAAqB,eAAeN,IAAK,GAAjD;IACD;;IACD,OAAQ,wBAAuB,KAAKK,GAAL,CAASL,IAAK,OAA7C;EACD;;AArBwC;;;AAwB3Cd,MAAM,CAACe,IAAP,CAAY,IAAIG,gBAAJ,CAAqB,YAArB,CAAZ;AACAlB,MAAM,CAACe,IAAP,CAAY,IAAIG,gBAAJ,CAAqB,YAArB,CAAZ;eAGelB,M"}